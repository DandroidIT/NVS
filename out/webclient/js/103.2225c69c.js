"use strict";(self["webpackChunknvs_c"]=self["webpackChunknvs_c"]||[]).push([[103],{8707:(e,s,t)=>{t.d(s,{Z:()=>i});var n=t(2775),o=t(1585);class a{getCams(){return new Promise((e=>{const s=s=>{e(s)};o.Z.bindAndsend({name:n.N.Cam_List,cb:s})}))}_objMove(e,s,t=100,o="0"){if("STOP"===s)return JSON.stringify({type:n.N.Cam_Controll,payload:{tagcam:e,cmd:"move_stop"}});const a={tagcam:e,speed:{x:"",y:"",z:""},timeout:t,cmd:"move",preset:o},i=a;return"UP"===s?i.speed={x:"0",y:"1.0",z:"0"}:"UPLEFT"===s?i.speed={x:"-1.0",y:"1.0",z:"0"}:"UPRIGHT"===s?i.speed={x:"1.0",y:"1.0",z:"0"}:"DOWN"===s?i.speed={x:"0",y:"-1.0",z:"0"}:"DOWNLEFT"===s?i.speed={x:"-1.0",y:"-1.0",z:"0"}:"DOWNRIGHT"===s?i.speed={x:"1.0",y:"-1.0",z:"0"}:"LEFT"===s?i.speed={x:"-1.0",y:"0",z:"0"}:"RIGHT"===s?i.speed={x:"1.0",y:"0",z:"0"}:"ZOOMIN"===s?i.speed={x:"0",y:"0",z:"1.0"}:"ZOOMOUT"===s?i.speed={x:"0",y:"0",z:"-1.0"}:"preset"!==s&&"save_preset"!==s||(i.speed={x:"1",y:"1",z:"1"},i.cmd=s),JSON.stringify({type:n.N.Cam_Controll,payload:i})}move(e,s,t="1",a=100){return new Promise((i=>{const r=e=>{i(e)};o.Z.bindAndsend({name:n.N.Cam_Controll,cb:r},{name:n.N.Cam_Controll,msg:this._objMove(e,s,a,t)})}))}screenshot(e){return new Promise((s=>{const t=e=>{s(e)},a=JSON.stringify({payload:{tagcam:e}});o.Z.bindAndsend({name:n.N.Cam_Screenshot,cb:t},{msg:a})}))}setOptionCam(e,s,t,a=!1){return new Promise((i=>{const r=JSON.stringify({payload:{tagcam:e,option:s,data:t,checkonly:a}});o.Z.bindAndsend({name:n.N.Cam_Setoption,cb:e=>{i(e)}},{msg:r})}))}probeCams(){return new Promise((e=>{const s=s=>{e(s)};o.Z.bindAndsend({name:n.N.radarCams,cb:s})}))}saveProbeCam(e){return new Promise((s=>{const t=JSON.stringify({payload:{cam:e}}),a=e=>{s(e)};o.Z.bindAndsend({name:n.N.saveRadarCam,cb:a},{msg:t})}))}}const i=new a},658:(e,s,t)=>{t.d(s,{Z:()=>u});var n=t(1959),o=t(8707),a=t(5267),i=function(e,s,t,n){function o(e){return e instanceof t?e:new t((function(s){s(e)}))}return new(t||(t=Promise))((function(t,a){function i(e){try{c(n.next(e))}catch(s){a(s)}}function r(e){try{c(n["throw"](e))}catch(s){a(s)}}function c(e){e.done?t(e.value):o(e.value).then(i,r)}c((n=n.apply(e,s||[])).next())}))};const r=t(4244).lW,c=(0,n.qj)({}),l=(0,n.qj)({success:!0,msgError:"",msgSuccess:""}),d=(0,n.qj)([]),m=()=>{const e=e=>`${a.u.wss}/stream/${e}`,s=(e=!1)=>i(void 0,void 0,void 0,(function*(){var s;if(e&&(c.list=[]),null===(s=c.list)||void 0===s?void 0:s.length)return;const t=yield o.Z.getCams();!1===t.inError?c.list=t.dataResult:l.msgError=t.msg,l.success=!t.inError})),t=e=>{var s;const t=null===(s=c.list)||void 0===s?void 0:s.find((s=>(null===s||void 0===s?void 0:s.id)==e));if(t)return t},m=e=>i(void 0,void 0,void 0,(function*(){yield u(e,"delete",!0),l.success&&(yield s(!0))})),u=(e,s,t,n=!1)=>i(void 0,void 0,void 0,(function*(){const a=yield o.Z.setOptionCam(e,s,t,n);!0===a.inError&&(l.msgError=a.msg),l.success=!a.inError})),p=e=>i(void 0,void 0,void 0,(function*(){const s=yield o.Z.screenshot(e);if(!1===s.inError){const e=`data:image/jpg;base64, ${r.from(s.dataResult.data).toString("base64")}`;d.push(e)}else l.msgError=s.msg;l.success=!s.inError})),g=(e,s,t)=>i(void 0,void 0,void 0,(function*(){const n=yield o.Z.move(e,s,t);n.inError&&(l.msgError=n.msg),l.success=n.dataResult}));return{state:l,cams:(0,n.OT)(c),screenshots:d,urlplayer:e,getCam:t,getCams:s,deleteCam:m,getScreenshot:p,panMove:g,setOptions:u}},u=m},2391:(e,s,t)=>{t.d(s,{_:()=>a,K:()=>i});var n=t(4434),o=t(5616);const a=(e,s=1500)=>{e&&n.Z.create({icon:"mdi-information-variant",progress:!0,message:e,position:"top",timeout:s,textColor:"white",color:"",actions:[{icon:"close",color:"white"}]})},i=(e,s,t)=>{const n=new Date(e,s-1,t);return o.ZP.daysInMonth(n)}},3103:(e,s,t)=>{t.r(s),t.d(s,{default:()=>N});var n=t(3673),o=t(2323),a=t(8880);function i(e,s,t,i,r,c){const l=(0,n.up)("q-spinner-puff"),d=(0,n.up)("q-dialog"),m=(0,n.up)("q-icon"),u=(0,n.up)("q-card-section"),p=(0,n.up)("q-card"),g=(0,n.up)("q-btn"),v=(0,n.up)("q-item-section"),f=(0,n.up)("q-item"),w=(0,n.up)("q-item-label"),y=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(y,{class:"bg-primary q-pa-sm"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{modelValue:e.state.isawait,"onUpdate:modelValue":s[1]||(s[1]=s=>e.state.isawait=s),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{color:"red",size:"20em"})])),_:1},8,["modelValue"]),(0,n.Wm)(p,{dark:"",class:"bg-transparent no-shadow no-border"},{default:(0,n.w5)((()=>{var s;return[e.state.success?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(p,{key:0,dark:""},{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Wm)(m,{name:"mdi-alert",color:"red",size:"34px"})])),_:1}),(0,n.Wm)(u,{class:"q-pt-none"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(e.state.msgError),1)])),_:1})])),_:1})),(0,n.wy)((0,n.Wm)(f,{dark:"",class:"q-pa-none q-ml-xs"},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{side:""},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{label:"Goto Radar",align:"left",icon:"mdi-radar",size:"55px",color:"orange",flat:"",padding:"xs",class:"full-width text-capitalize",to:"setup"})])),_:1})])),_:1},512),[[a.F8,0===(null===(s=e.cams.list)||void 0===s?void 0:s.length)]]),((0,n.wg)(!0),(0,n.j4)(n.HY,null,(0,n.Ko)(e.cams.list,((s,t)=>{var i;return(0,n.wy)(((0,n.wg)(),(0,n.j4)(f,{dark:"",class:"q-pa-none q-ml-xs",key:t,clickable:""},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{side:"",class:"q-pa-lg q-mr-none",style:{"background-color":"#464646"}},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{name:"mdi-cctv",color:"orange",size:"34px"}),(0,n.wy)((0,n.Wm)(m,{name:"sync_problem",color:"white",size:"24px"},null,512),[[a.F8,!0===s.inerror]])])),_:2},1024),(0,n.Wm)(v,{onClick:t=>!1===s.inerror?e.clickgotoCam(s.id):null,class:"q-pa-md q-ml-none text-white"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{class:"text-white text-weight-bolder"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(s.name)+" ("+(0,o.zw)(s.id)+")",1)])),_:2},1024)])),_:2},1032,["onClick"]),(0,n.Wm)(v,{side:""},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{onClick:t=>e.clickDeleteCam(s.id),flat:"",dense:"",size:"lg",color:"orange",icon:"mdi-delete",class:"t"},null,8,["onClick"])])),_:2},1024)])),_:2},1536)),[[a.F8,null===(i=e.cams.list)||void 0===i?void 0:i.length]])})),128))]})),_:1})])),_:1})}var r=t(1959),c=t(658),l=t(2391),d=function(e,s,t,n){function o(e){return e instanceof t?e:new t((function(s){s(e)}))}return new(t||(t=Promise))((function(t,a){function i(e){try{c(n.next(e))}catch(s){a(s)}}function r(e){try{c(n["throw"](e))}catch(s){a(s)}}function c(e){e.done?t(e.value):o(e.value).then(i,r)}c((n=n.apply(e,s||[])).next())}))};const{state:m,cams:u,getCams:p,deleteCam:g}=(0,c.Z)(),v=e=>{const s=(0,r.qj)({isawait:!1,success:!0,msgError:"",msgSuccess:""});(0,n.YP)(s,(e=>{!e.isawait&&e.msgSuccess&&((0,l._)(e.msgSuccess),e.msgSuccess="")})),(0,n.bv)((()=>d(void 0,void 0,void 0,(function*(){s.isawait=!0,yield p(),m.success?s.msgSuccess="Cams load":s.msgError=m.msgError,s.success=m.success,s.isawait=!1}))));const t=s=>{e.push({path:`/cam/${s}`})},o=e=>d(void 0,void 0,void 0,(function*(){s.isawait=!0,yield g(e),s.success=m.success,s.isawait=!1}));return{state:(0,r.OT)(s),cams:u,clickgotoCam:t,clickDeleteCam:o}},f=v;var w=t(9582);const y=(0,n.aZ)({name:"pDashboard",setup(){const{state:e,cams:s,clickgotoCam:t,clickDeleteCam:n}=f((0,w.tv)());return{state:e,cams:s,clickgotoCam:t,clickDeleteCam:n}}});var C=t(4379),h=t(6778),b=t(8430),Z=t(151),_=t(5589),k=t(4554),x=t(3414),q=t(2035),z=t(4607),W=t(7011),E=t(2350),O=t(7518),S=t.n(O);y.render=i;const N=y;S()(y,"components",{QPage:C.Z,QDialog:h.Z,QSpinnerPuff:b.Z,QCard:Z.Z,QCardSection:_.Z,QIcon:k.Z,QItem:x.Z,QItemSection:q.Z,QBtn:z.Z,QList:W.Z,QItemLabel:E.Z})}}]);