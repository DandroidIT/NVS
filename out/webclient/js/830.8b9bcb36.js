"use strict";(self["webpackChunknvs_c"]=self["webpackChunknvs_c"]||[]).push([[830],{8707:(e,t,o)=>{o.d(t,{Z:()=>i});var s=o(2775),l=o(1585);class a{getCams(){return new Promise((e=>{const t=t=>{e(t)};l.Z.bindAndsend({name:s.N.Cam_List,cb:t})}))}_objMove(e,t,o=100,l="0"){if("STOP"===t)return JSON.stringify({type:s.N.Cam_Controll,payload:{tagcam:e,cmd:"move_stop"}});const a={tagcam:e,speed:{x:"",y:"",z:""},timeout:o,cmd:"move",preset:l},i=a;return"UP"===t?i.speed={x:"0",y:"1.0",z:"0"}:"UPLEFT"===t?i.speed={x:"-1.0",y:"1.0",z:"0"}:"UPRIGHT"===t?i.speed={x:"1.0",y:"1.0",z:"0"}:"DOWN"===t?i.speed={x:"0",y:"-1.0",z:"0"}:"DOWNLEFT"===t?i.speed={x:"-1.0",y:"-1.0",z:"0"}:"DOWNRIGHT"===t?i.speed={x:"1.0",y:"-1.0",z:"0"}:"LEFT"===t?i.speed={x:"-1.0",y:"0",z:"0"}:"RIGHT"===t?i.speed={x:"1.0",y:"0",z:"0"}:"ZOOMIN"===t?i.speed={x:"0",y:"0",z:"1.0"}:"ZOOMOUT"===t?i.speed={x:"0",y:"0",z:"-1.0"}:"preset"!==t&&"save_preset"!==t||(i.speed={x:"1",y:"1",z:"1"},i.cmd=t),JSON.stringify({type:s.N.Cam_Controll,payload:i})}move(e,t,o="1",a=100){return new Promise((i=>{const n=e=>{i(e)};l.Z.bindAndsend({name:s.N.Cam_Controll,cb:n},{name:s.N.Cam_Controll,msg:this._objMove(e,t,a,o)})}))}screenshot(e){return new Promise((t=>{const o=e=>{t(e)},a=JSON.stringify({payload:{tagcam:e}});l.Z.bindAndsend({name:s.N.Cam_Screenshot,cb:o},{msg:a})}))}setOptionCam(e,t,o,a=!1){return new Promise((i=>{const n=JSON.stringify({payload:{tagcam:e,option:t,data:o,checkonly:a}});l.Z.bindAndsend({name:s.N.Cam_Setoption,cb:e=>{i(e)}},{msg:n})}))}probeCams(){return new Promise((e=>{const t=t=>{e(t)};l.Z.bindAndsend({name:s.N.radarCams,cb:t})}))}saveProbeCam(e){return new Promise((t=>{const o=JSON.stringify({payload:{cam:e}}),a=e=>{t(e)};l.Z.bindAndsend({name:s.N.saveRadarCam,cb:a},{msg:o})}))}}const i=new a},658:(e,t,o)=>{o.d(t,{Z:()=>u});var s=o(1959),l=o(8707),a=o(5267),i=function(e,t,o,s){function l(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,a){function i(e){try{c(s.next(e))}catch(t){a(t)}}function n(e){try{c(s["throw"](e))}catch(t){a(t)}}function c(e){e.done?o(e.value):l(e.value).then(i,n)}c((s=s.apply(e,t||[])).next())}))};const n=o(4244).lW,c=(0,s.qj)({}),r=(0,s.qj)({success:!0,msgError:"",msgSuccess:""}),d=(0,s.qj)([]),m=()=>{const e=e=>`${a.u.wss}/stream/${e}`,t=(e=!1)=>i(void 0,void 0,void 0,(function*(){var t;if(e&&(c.list=[]),null===(t=c.list)||void 0===t?void 0:t.length)return;const o=yield l.Z.getCams();!1===o.inError?c.list=o.dataResult:r.msgError=o.msg,r.success=!o.inError})),o=e=>{var t;const o=null===(t=c.list)||void 0===t?void 0:t.find((t=>(null===t||void 0===t?void 0:t.id)==e));if(o)return o},m=e=>i(void 0,void 0,void 0,(function*(){yield u(e,"delete",!0),r.success&&(yield t(!0))})),u=(e,t,o,s=!1)=>i(void 0,void 0,void 0,(function*(){const a=yield l.Z.setOptionCam(e,t,o,s);!0===a.inError&&(r.msgError=a.msg),r.success=!a.inError})),p=e=>i(void 0,void 0,void 0,(function*(){const t=yield l.Z.screenshot(e);if(!1===t.inError){const e=`data:image/jpg;base64, ${n.from(t.dataResult.data).toString("base64")}`;d.push(e)}else r.msgError=t.msg;r.success=!t.inError})),v=(e,t,o)=>i(void 0,void 0,void 0,(function*(){const s=yield l.Z.move(e,t,o);s.inError&&(r.msgError=s.msg),r.success=s.dataResult}));return{state:r,cams:(0,s.OT)(c),screenshots:d,urlplayer:e,getCam:o,getCams:t,deleteCam:m,getScreenshot:p,panMove:v,setOptions:u}},u=m},2391:(e,t,o)=>{o.d(t,{_:()=>a,K:()=>i});var s=o(4434),l=o(5616);const a=(e,t=1500)=>{e&&s.Z.create({icon:"mdi-information-variant",progress:!0,message:e,position:"top",timeout:t,textColor:"white",color:"",actions:[{icon:"close",color:"white"}]})},i=(e,t,o)=>{const s=new Date(e,t-1,o);return l.ZP.daysInMonth(s)}},3951:(e,t,o)=>{o.d(t,{Z:()=>C});var s=o(3673);const l={class:"row justify-center"},a={class:"col-xs-3"},i={class:"col-xs-3"},n={class:"col-xs-3"},c={class:"col-xs-3"},r={class:"row justify-center"},d={class:"col-xs-3"},m={class:"col-xs-3"},u={class:"col-xs-3"},p={class:"col-xs-3"},v={class:"row justify-center"},g={class:"col-xs-3"},f={class:"col-xs-3"},w={class:"col-xs-3"},h={class:"col-xs-3"};function x(e,t,o,x,y,W){const k=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.j4)(s.HY,null,[(0,s.Wm)("div",l,[(0,s.Wm)("div",a,[(0,s.Wm)(k,{icon:"mdi-arrow-top-left-thick",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[1]||(t[1]=t=>e.clickCmd("UPLEFT"))})]),(0,s.Wm)("div",i,[(0,s.Wm)(k,{icon:"mdi-arrow-up-thick",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[2]||(t[2]=t=>e.clickCmd("UP"))})]),(0,s.Wm)("div",n,[(0,s.Wm)(k,{icon:"mdi-arrow-top-right-thick",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[3]||(t[3]=t=>e.clickCmd("UPRIGHT"))})]),(0,s.Wm)("div",c,[(0,s.Wm)(k,{icon:"mdi-plus-thick",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[4]||(t[4]=t=>e.clickCmd("ZOOMIN"))})])]),(0,s.Wm)("div",r,[(0,s.Wm)("div",d,[(0,s.Wm)(k,{icon:"mdi-arrow-left-thick",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[5]||(t[5]=t=>e.clickCmd("LEFT"))})]),(0,s.Wm)("div",m,[(0,s.Wm)(k,{icon:"mdi-home",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[6]||(t[6]=t=>e.clickCmd("preset"))})]),(0,s.Wm)("div",u,[(0,s.Wm)(k,{icon:"mdi-arrow-right-thick",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[7]||(t[7]=t=>e.clickCmd("RIGHT"))})]),(0,s.Wm)("div",p,[(0,s.Wm)(k,{icon:"mdi-camera",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[8]||(t[8]=t=>e.clickCmd("screenshot"))})])]),(0,s.Wm)("div",v,[(0,s.Wm)("div",g,[(0,s.Wm)(k,{icon:"mdi-arrow-bottom-left-thick",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[9]||(t[9]=t=>e.clickCmd("DOWNLEFT"))})]),(0,s.Wm)("div",f,[(0,s.Wm)(k,{icon:"mdi-arrow-down-thick",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[10]||(t[10]=t=>e.clickCmd("DOWN"))})]),(0,s.Wm)("div",w,[(0,s.Wm)(k,{icon:"mdi-arrow-bottom-right-thick",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[11]||(t[11]=t=>e.clickCmd("DOWNRIGHT"))})]),(0,s.Wm)("div",h,[(0,s.Wm)(k,{icon:"mdi-minus-thick",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[12]||(t[12]=t=>e.clickCmd("ZOOMOUT"))})])])],64)}const y=(0,s.aZ)({name:"ComponentJoyPad",emits:["directioncam"],setup(e,{emit:t}){const o=e=>{t("directioncam",e)};return{clickCmd:o}}});var W=o(4607),k=o(7518),b=o.n(k);y.render=x;const C=y;b()(y,"components",{QBtn:W.Z})},7830:(e,t,o)=>{o.r(t),o.d(t,{default:()=>me});var s=o(3673),l=o(2323),a=o(8880);const i={class:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},n={key:0,class:"row"},c=(0,s.Wm)("div",{class:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},[(0,s.Wm)("video",{id:"videocam",style:{},class:"full-width full-height",controls:"",autoplay:""}),(0,s.Wm)("canvas",{class:"full-width full-height",id:"videostream"})],-1),r={class:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},d={class:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},m={class:"row justify-center"},u={class:"col-xs-6"},p={class:"col-xs-6"},v={class:"row justify-center"},g={class:"col-xs-12"};function f(e,t,o,f,w,h){const x=(0,s.up)("q-spinner-puff"),y=(0,s.up)("q-dialog"),W=(0,s.up)("q-icon"),k=(0,s.up)("q-card-section"),b=(0,s.up)("q-card"),C=(0,s.up)("q-btn"),P=(0,s.up)("q-item-section"),z=(0,s.up)("q-slider"),Z=(0,s.up)("q-item"),_=(0,s.up)("q-tab"),S=(0,s.up)("q-tabs"),M=(0,s.up)("q-separator"),q=(0,s.up)("joy-pad"),j=(0,s.up)("q-tab-panel"),O=(0,s.up)("presets"),E=(0,s.up)("q-toggle"),N=(0,s.up)("q-list"),T=(0,s.up)("q-tab-panels"),Q=(0,s.up)("q-page"),V=(0,s.Q2)("ripple");return(0,s.wg)(),(0,s.j4)(Q,{class:"bg-primary q-pa-sm"},{default:(0,s.w5)((()=>[(0,s.Wm)(y,{modelValue:e.state.isawait,"onUpdate:modelValue":t[1]||(t[1]=t=>e.state.isawait=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,s.w5)((()=>[(0,s.Wm)(x,{color:"red",size:"20em"})])),_:1},8,["modelValue"]),e.state.success?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(b,{key:0,dark:""},{default:(0,s.w5)((()=>[(0,s.Wm)(k,null,{default:(0,s.w5)((()=>[(0,s.Wm)(W,{name:"mdi-alert",color:"red",size:"34px"})])),_:1}),(0,s.Wm)(k,{class:"q-pt-none"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.state.error),1)])),_:1})])),_:1})),(0,s.Wm)("div",i,[e.cam?((0,s.wg)(),(0,s.j4)("div",n,(0,l.zw)(`${e.cam.name}`),1)):(0,s.kq)("",!0)]),c,(0,s.Wm)("div",r,[(0,s.Wm)(Z,{dense:""},{default:(0,s.w5)((()=>[(0,s.Wm)(P,{side:"",avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(C,{icon:0===e.JSMpegPlayer.volume?"mdi-volume-off":"mdi-volume-high",color:"orange",flat:"",onClick:e.volume},null,8,["icon","onClick"])])),_:1}),(0,s.Wm)(P,null,{default:(0,s.w5)((()=>[(0,s.Wm)(z,{modelValue:e.JSMpegPlayer.volume,"onUpdate:modelValue":t[2]||(t[2]=t=>e.JSMpegPlayer.volume=t),min:0,max:100,label:"",color:"orange"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(P,{side:""},{default:(0,s.w5)((()=>[(0,s.Wm)(C,{icon:"mdi-picture-in-picture-bottom-right",color:"orange",flat:"",onClick:e.clickPiP},null,8,["onClick"])])),_:1})])),_:1})]),(0,s.Wm)("div",d,[(0,s.Wm)(b,{class:"bg-primary"},{default:(0,s.w5)((()=>[(0,s.Wm)(S,{modelValue:e.tab,"onUpdate:modelValue":t[3]||(t[3]=t=>e.tab=t),dense:"",class:"text-grey dark","active-color":"white","indicator-color":"red",align:"justify","narrow-indicator":""},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{name:"home",label:"Joy"}),(0,s.Wm)(_,{name:"presets",label:"Presets"}),(0,s.Wm)(_,{name:"setting",label:"Setting"}),(0,s.Wm)(_,{name:"screenshot",label:`ScreenShot (${e.screenshots.length})`},null,8,["label"])])),_:1},8,["modelValue"]),(0,s.Wm)(M),(0,s.Wm)(T,{modelValue:e.tab,"onUpdate:modelValue":t[8]||(t[8]=t=>e.tab=t),animated:"",class:"bg-primary"},{default:(0,s.w5)((()=>[(0,s.Wm)(j,{name:"home"},{default:(0,s.w5)((()=>[(0,s.Wm)(q,{onDirectioncam:e.clickMove},null,8,["onDirectioncam"])])),_:1}),(0,s.Wm)(j,{name:"presets"},{default:(0,s.w5)((()=>[(0,s.Wm)(O,{onClickpreset:e.clickMove},null,8,["onClickpreset"])])),_:1}),(0,s.Wm)(j,{name:"setting"},{default:(0,s.w5)((()=>[(0,s.Wm)("div",m,[(0,s.Wm)("div",u,[(0,s.Wm)(N,null,{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(Z,{tag:"label",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(P,{avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(E,{icon:"mdi-motion-sensor",size:"80px",color:"orange",modelValue:e.cam.motion,"onUpdate:modelValue":t[4]||(t[4]=t=>e.cam.motion=t),onClick:t[5]||(t[5]=t=>e.changeSetting("livemotion",e.cam.motion))},null,8,["modelValue"])])),_:1})])),_:1},512),[[V]])])),_:1})]),(0,s.Wm)("div",p,[(0,s.Wm)(N,null,{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(Z,{tag:"label",class:"text-white justify-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(P,{avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(E,{icon:"mdi-record-rec",size:"80px",color:"orange",modelValue:e.cam.liveH24,"onUpdate:modelValue":t[6]||(t[6]=t=>e.cam.liveH24=t),onClick:t[7]||(t[7]=t=>e.changeSetting("live24",e.cam.liveH24))},null,8,["modelValue"])])),_:1})])),_:1},512),[[V]])])),_:1})])]),(0,s.Wm)("div",v,[(0,s.Wm)("div",g,[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(e.cam.information,((e,t)=>((0,s.wg)(),(0,s.j4)(N,{key:t,dense:""},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(Z,{class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e[0])+": "+(0,l.zw)(e[1]),1)])),_:2},1536),[[a.F8,e[1]]])])),_:2},1024)))),128))])])])),_:1}),(0,s.Wm)(j,{name:"screenshot"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(e.screenshots,((e,t)=>((0,s.wg)(),(0,s.j4)("div",{class:"col-lg-12 col-md-12 col-sm-12 col-xs-12",key:t},[(0,s.Wm)("img",{class:"full-width",src:e},null,8,["src"])])))),128))])),_:1})])),_:1},8,["modelValue"])])),_:1})])])),_:1})}var w=o(1959),h=o(658),x=o(3226),y=o(2391),W=o(9582),k=o(6213),b=o.n(k),C=function(e,t,o,s){function l(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,a){function i(e){try{c(s.next(e))}catch(t){a(t)}}function n(e){try{c(s["throw"](e))}catch(t){a(t)}}function c(e){e.done?o(e.value):l(e.value).then(i,n)}c((s=s.apply(e,t||[])).next())}))};const{userState:P}=(0,x.C)(),{state:z,screenshots:Z,getCam:_,urlplayer:S,getScreenshot:M,panMove:q,setOptions:j}=(0,h.Z)(),O=()=>{const e=(0,w.qj)({isawait:!1,success:!0,msgError:"",msgSuccess:""}),t=(0,w.qj)({}),o=(0,w.qj)({val:{destroy:()=>{},volume:10}}),l=(0,w.iH)(""),a=(0,w.iH)("home");let i,n;(0,s.bv)((()=>{const e=(0,W.yj)();l.value=e.params.id,t.val=_(l.value),c(l.value)})),(0,s.Jd)((()=>{try{o&&o.val.destroy()}catch(e){console.log("error in camview beforeDestroy:",e)}}));const c=e=>{var t;i=document.getElementById("videostream"),n=document.getElementById("videocam"),o.val=new(b().Player)(S(e),{canvas:i,protocols:null===(t=P.user)||void 0===t?void 0:t.token,onSourceEstablished:()=>{r()}}),o.val.volume=10},r=()=>{try{if(i){const e=i.captureStream();n&&(n.srcObject=e,i.style.display="none",i.remove())}}catch(e){}},d=()=>C(void 0,void 0,void 0,(function*(){try{document.pictureInPictureElement?yield document.exitPictureInPicture():yield null===n||void 0===n?void 0:n.requestPictureInPicture()}catch(e){(0,y._)("Picture-in-Picture Web API is not supported")}})),m=()=>{o.val.volume=0===o.val.volume?10:0},u=(t,o)=>C(void 0,void 0,void 0,(function*(){"screenshot"===t?(e.isawait=!0,yield M(l.value),e.isawait=!1):yield q(l.value,t,o)})),p=(t,o)=>C(void 0,void 0,void 0,(function*(){e.isawait=!0,yield j(l.value,t,o),e.success=z.success,e.success?(0,y._)(`${t} set: ${o} ok!`):e.msgError=z.msgError,e.isawait=!1}));return{state:(0,w.OT)(e),tab:a,JSMpegPlayer:(0,s.Fl)((()=>o.val)),screenshots:Z,cam:(0,s.Fl)((()=>t.val)),getScreenshot:M,clickMove:u,changeSetting:p,clickPiP:d,volume:m}},E=O;var N=o(3951);const T={class:"row justify-center"},Q={class:"col-xs-3"},V={class:"col-xs-6"},I={class:"col-xs-3"};function U(e,t,o,l,a,i){const n=(0,s.up)("q-btn"),c=(0,s.up)("q-select");return(0,s.wg)(),(0,s.j4)("div",T,[(0,s.Wm)("div",Q,[(0,s.Wm)(n,{icon:"mdi-content-save-all",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[1]||(t[1]=t=>e.emit("clickpreset","save_preset",e.preset))})]),(0,s.Wm)("div",V,[(0,s.Wm)(c,{filled:"","label-color":"white",color:"white",modelValue:e.preset,"onUpdate:modelValue":t[2]||(t[2]=t=>e.preset=t),options:e.listPreset,class:"float-center text-white",label:"Preset",id:"selectpreset"},null,8,["modelValue","options"])]),(0,s.Wm)("div",I,[(0,s.Wm)(n,{icon:"mdi-image-filter-center-focus-strong",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[3]||(t[3]=t=>e.emit("clickpreset","preset",e.preset))})])])}const H=(0,s.aZ)({name:"ComponentPresets",emits:["clickpreset"],setup(e,{emit:t}){const o=(0,w.iH)("1"),l=(0,w.iH)([]);for(let s=1;s<20;s++)l.value.push(`${s}`);return(0,s.YP)(o,(()=>{t("clickpreset","preset",o.value)})),{emit:t,preset:o,listPreset:l}}});var J=o(4607),D=o(8516),R=o(7518),F=o.n(R);H.render=U;const L=H;F()(H,"components",{QBtn:J.Z,QSelect:D.Z});const $=(0,s.aZ)({name:"pCam",components:{joyPad:N.Z,presets:L},setup(){const{state:e,clickPiP:t,volume:o,tab:s,JSMpegPlayer:l,cam:a,screenshots:i,getScreenshot:n,clickMove:c,changeSetting:r}=E();return{state:e,volume:o,clickPiP:t,tab:s,JSMpegPlayer:l,cam:a,screenshots:i,getScreenshot:n,clickMove:c,changeSetting:r}}});var A=o(4379),G=o(6778),B=o(8430),Y=o(151),K=o(5589),X=o(4554),ee=o(3414),te=o(2035),oe=o(2064),se=o(7547),le=o(3269),ae=o(5869),ie=o(5906),ne=o(6602),ce=o(7011),re=o(4620),de=o(6489);$.render=f;const me=$;F()($,"components",{QPage:A.Z,QDialog:G.Z,QSpinnerPuff:B.Z,QCard:Y.Z,QCardSection:K.Z,QIcon:X.Z,QItem:ee.Z,QItemSection:te.Z,QBtn:J.Z,QSlider:oe.Z,QTabs:se.Z,QTab:le.Z,QSeparator:ae.Z,QTabPanels:ie.Z,QTabPanel:ne.Z,QList:ce.Z,QToggle:re.Z}),F()($,"directives",{Ripple:de.Z})}}]);