"use strict";(self["webpackChunknvs_c"]=self["webpackChunknvs_c"]||[]).push([[100],{8707:(e,t,s)=>{s.d(t,{Z:()=>n});var o=s(2775),a=s(1585);class l{getCams(){return new Promise((e=>{const t=t=>{e(t)};a.Z.bindAndsend({name:o.N.Cam_List,cb:t})}))}_objMove(e,t,s=100,a="0"){if("STOP"===t)return JSON.stringify({type:o.N.Cam_Controll,payload:{tagcam:e,cmd:"move_stop"}});const l={tagcam:e,speed:{x:"",y:"",z:""},timeout:s,cmd:"move",preset:a},n=l;return"UP"===t?n.speed={x:"0",y:"1.0",z:"0"}:"UPLEFT"===t?n.speed={x:"-1.0",y:"1.0",z:"0"}:"UPRIGHT"===t?n.speed={x:"1.0",y:"1.0",z:"0"}:"DOWN"===t?n.speed={x:"0",y:"-1.0",z:"0"}:"DOWNLEFT"===t?n.speed={x:"-1.0",y:"-1.0",z:"0"}:"DOWNRIGHT"===t?n.speed={x:"1.0",y:"-1.0",z:"0"}:"LEFT"===t?n.speed={x:"-1.0",y:"0",z:"0"}:"RIGHT"===t?n.speed={x:"1.0",y:"0",z:"0"}:"ZOOMIN"===t?n.speed={x:"0",y:"0",z:"1.0"}:"ZOOMOUT"===t?n.speed={x:"0",y:"0",z:"-1.0"}:"preset"!==t&&"save_preset"!==t||(n.speed={x:"1",y:"1",z:"1"},n.cmd=t),JSON.stringify({type:o.N.Cam_Controll,payload:n})}move(e,t,s="1",l=100){return new Promise((n=>{const i=e=>{n(e)};a.Z.bindAndsend({name:o.N.Cam_Controll,cb:i},{name:o.N.Cam_Controll,msg:this._objMove(e,t,l,s)})}))}screenshot(e){return new Promise((t=>{const s=e=>{t(e)},l=JSON.stringify({payload:{tagcam:e}});a.Z.bindAndsend({name:o.N.Cam_Screenshot,cb:s},{msg:l})}))}setOptionCam(e,t,s,l=!1){return new Promise((n=>{const i=JSON.stringify({payload:{tagcam:e,option:t,data:s,checkonly:l}});a.Z.bindAndsend({name:o.N.Cam_Setoption,cb:e=>{n(e)}},{msg:i})}))}probeCams(){return new Promise((e=>{const t=t=>{e(t)};a.Z.bindAndsend({name:o.N.radarCams,cb:t})}))}saveProbeCam(e){return new Promise((t=>{const s=JSON.stringify({payload:{cam:e}}),l=e=>{t(e)};a.Z.bindAndsend({name:o.N.saveRadarCam,cb:l},{msg:s})}))}}const n=new l},658:(e,t,s)=>{s.d(t,{Z:()=>u});var o=s(1959),a=s(8707),l=s(5267),n=function(e,t,s,o){function a(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,l){function n(e){try{c(o.next(e))}catch(t){l(t)}}function i(e){try{c(o["throw"](e))}catch(t){l(t)}}function c(e){e.done?s(e.value):a(e.value).then(n,i)}c((o=o.apply(e,t||[])).next())}))};const i=s(4244).lW,c=(0,o.qj)({}),r=(0,o.qj)({success:!0,msgError:"",msgSuccess:""}),d=(0,o.qj)([]),m=()=>{const e=e=>`${l.u.wss}/stream/${e}`,t=(e=!1)=>n(void 0,void 0,void 0,(function*(){var t;if(e&&(c.list=[]),null===(t=c.list)||void 0===t?void 0:t.length)return;const s=yield a.Z.getCams();!1===s.inError?c.list=s.dataResult:r.msgError=s.msg,r.success=!s.inError})),s=e=>{var t;const s=null===(t=c.list)||void 0===t?void 0:t.find((t=>(null===t||void 0===t?void 0:t.id)==e));if(s)return s},m=e=>n(void 0,void 0,void 0,(function*(){yield u(e,"delete",!0),r.success&&(yield t(!0))})),u=(e,t,s,o=!1)=>n(void 0,void 0,void 0,(function*(){const l=yield a.Z.setOptionCam(e,t,s,o);!0===l.inError&&(r.msgError=l.msg),r.success=!l.inError})),p=e=>n(void 0,void 0,void 0,(function*(){const t=yield a.Z.screenshot(e);if(!1===t.inError){const e=`data:image/jpg;base64, ${i.from(t.dataResult.data).toString("base64")}`;d.push(e)}else r.msgError=t.msg;r.success=!t.inError})),v=(e,t,s)=>n(void 0,void 0,void 0,(function*(){const o=yield a.Z.move(e,t,s);o.inError&&(r.msgError=o.msg),r.success=o.dataResult}));return{state:r,cams:(0,o.OT)(c),screenshots:d,urlplayer:e,getCam:s,getCams:t,deleteCam:m,getScreenshot:p,panMove:v,setOptions:u}},u=m},2391:(e,t,s)=>{s.d(t,{_:()=>l,K:()=>n});var o=s(4434),a=s(5616);const l=(e,t=1500)=>{e&&o.Z.create({icon:"mdi-information-variant",progress:!0,message:e,position:"top",timeout:t,textColor:"white",color:"",actions:[{icon:"close",color:"white"}]})},n=(e,t,s)=>{const o=new Date(e,t-1,s);return a.ZP.daysInMonth(o)}},3951:(e,t,s)=>{s.d(t,{Z:()=>C});var o=s(3673);const a={class:"row justify-center"},l={class:"col-xs-3"},n={class:"col-xs-3"},i={class:"col-xs-3"},c={class:"col-xs-3"},r={class:"row justify-center"},d={class:"col-xs-3"},m={class:"col-xs-3"},u={class:"col-xs-3"},p={class:"col-xs-3"},v={class:"row justify-center"},g={class:"col-xs-3"},w={class:"col-xs-3"},f={class:"col-xs-3"},x={class:"col-xs-3"};function h(e,t,s,h,W,y){const b=(0,o.up)("q-btn");return(0,o.wg)(),(0,o.j4)(o.HY,null,[(0,o.Wm)("div",a,[(0,o.Wm)("div",l,[(0,o.Wm)(b,{icon:"mdi-arrow-top-left-thick",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[1]||(t[1]=t=>e.clickCmd("UPLEFT"))})]),(0,o.Wm)("div",n,[(0,o.Wm)(b,{icon:"mdi-arrow-up-thick",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[2]||(t[2]=t=>e.clickCmd("UP"))})]),(0,o.Wm)("div",i,[(0,o.Wm)(b,{icon:"mdi-arrow-top-right-thick",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[3]||(t[3]=t=>e.clickCmd("UPRIGHT"))})]),(0,o.Wm)("div",c,[(0,o.Wm)(b,{icon:"mdi-plus-thick",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[4]||(t[4]=t=>e.clickCmd("ZOOMIN"))})])]),(0,o.Wm)("div",r,[(0,o.Wm)("div",d,[(0,o.Wm)(b,{icon:"mdi-arrow-left-thick",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[5]||(t[5]=t=>e.clickCmd("LEFT"))})]),(0,o.Wm)("div",m,[(0,o.Wm)(b,{icon:"mdi-home",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[6]||(t[6]=t=>e.clickCmd("preset"))})]),(0,o.Wm)("div",u,[(0,o.Wm)(b,{icon:"mdi-arrow-right-thick",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[7]||(t[7]=t=>e.clickCmd("RIGHT"))})]),(0,o.Wm)("div",p,[(0,o.Wm)(b,{icon:"mdi-camera",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[8]||(t[8]=t=>e.clickCmd("screenshot"))})])]),(0,o.Wm)("div",v,[(0,o.Wm)("div",g,[(0,o.Wm)(b,{icon:"mdi-arrow-bottom-left-thick",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[9]||(t[9]=t=>e.clickCmd("DOWNLEFT"))})]),(0,o.Wm)("div",w,[(0,o.Wm)(b,{icon:"mdi-arrow-down-thick",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[10]||(t[10]=t=>e.clickCmd("DOWN"))})]),(0,o.Wm)("div",f,[(0,o.Wm)(b,{icon:"mdi-arrow-bottom-right-thick",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[11]||(t[11]=t=>e.clickCmd("DOWNRIGHT"))})]),(0,o.Wm)("div",x,[(0,o.Wm)(b,{icon:"mdi-minus-thick",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[12]||(t[12]=t=>e.clickCmd("ZOOMOUT"))})])])],64)}const W=(0,o.aZ)({name:"ComponentJoyPad",emits:["directioncam"],setup(e,{emit:t}){const s=e=>{t("directioncam",e)};return{clickCmd:s}}});var y=s(4607),b=s(7518),k=s.n(b);W.render=h;const C=W;k()(W,"components",{QBtn:y.Z})},2100:(e,t,s)=>{s.r(t),s.d(t,{default:()=>ue});var o=s(3673),a=s(2323),l=s(8880);const n={class:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},i={key:0,class:"row"},c=(0,o.Wm)("div",{class:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},[(0,o.Wm)("canvas",{class:"full-width full-height",id:"videostream"})],-1),r={class:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},d={class:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},m={class:"row justify-center"},u={class:"col-xs-6"},p={class:"col-xs-6"},v={class:"row justify-center"},g={class:"col-xs-12"};function w(e,t,s,w,f,x){const h=(0,o.up)("q-spinner-puff"),W=(0,o.up)("q-dialog"),y=(0,o.up)("q-icon"),b=(0,o.up)("q-card-section"),k=(0,o.up)("q-card"),C=(0,o.up)("q-item-section"),z=(0,o.up)("q-slider"),Z=(0,o.up)("q-item"),_=(0,o.up)("q-tab"),S=(0,o.up)("q-tabs"),P=(0,o.up)("q-separator"),M=(0,o.up)("joy-pad"),j=(0,o.up)("q-tab-panel"),q=(0,o.up)("presets"),O=(0,o.up)("q-toggle"),E=(0,o.up)("q-list"),N=(0,o.up)("q-tab-panels"),T=(0,o.up)("q-page"),Q=(0,o.Q2)("ripple");return(0,o.wg)(),(0,o.j4)(T,{class:"bg-primary q-pa-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{modelValue:e.state.isawait,"onUpdate:modelValue":t[1]||(t[1]=t=>e.state.isawait=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{color:"red",size:"20em"})])),_:1},8,["modelValue"]),e.state.success?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(k,{key:0,dark:""},{default:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Wm)(y,{name:"mdi-alert",color:"red",size:"34px"})])),_:1}),(0,o.Wm)(b,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.state.error),1)])),_:1})])),_:1})),(0,o.Wm)("div",n,[e.cam?((0,o.wg)(),(0,o.j4)("div",i,(0,a.zw)(`${e.cam.name}`),1)):(0,o.kq)("",!0)]),c,(0,o.Wm)("div",r,[(0,o.Wm)(Z,{dense:""},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{color:"orange",name:"volume_up"})])),_:1}),(0,o.Wm)(C,null,{default:(0,o.w5)((()=>[(0,o.Wm)(z,{modelValue:e.JSMpegPlayer.volume,"onUpdate:modelValue":t[2]||(t[2]=t=>e.JSMpegPlayer.volume=t),min:0,max:100,label:"",color:"orange"},null,8,["modelValue"])])),_:1})])),_:1})]),(0,o.Wm)("div",d,[(0,o.Wm)(k,{class:"bg-primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{modelValue:e.tab,"onUpdate:modelValue":t[3]||(t[3]=t=>e.tab=t),dense:"",class:"text-grey dark","active-color":"white","indicator-color":"red",align:"justify","narrow-indicator":""},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{name:"home",label:"Joy"}),(0,o.Wm)(_,{name:"presets",label:"Presets"}),(0,o.Wm)(_,{name:"setting",label:"Setting"}),(0,o.Wm)(_,{name:"screenshot",label:`ScreenShot (${e.screenshots.length})`},null,8,["label"])])),_:1},8,["modelValue"]),(0,o.Wm)(P),(0,o.Wm)(N,{modelValue:e.tab,"onUpdate:modelValue":t[8]||(t[8]=t=>e.tab=t),animated:"",class:"bg-primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(j,{name:"home"},{default:(0,o.w5)((()=>[(0,o.Wm)(M,{onDirectioncam:e.clickMove},null,8,["onDirectioncam"])])),_:1}),(0,o.Wm)(j,{name:"presets"},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{onClickpreset:e.clickMove},null,8,["onClickpreset"])])),_:1}),(0,o.Wm)(j,{name:"setting"},{default:(0,o.w5)((()=>[(0,o.Wm)("div",m,[(0,o.Wm)("div",u,[(0,o.Wm)(E,null,{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(Z,{tag:"label",class:"text-white"},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(O,{icon:"mdi-motion-sensor",size:"80px",color:"orange",modelValue:e.cam.motion,"onUpdate:modelValue":t[4]||(t[4]=t=>e.cam.motion=t),onClick:t[5]||(t[5]=t=>e.changeSetting("livemotion",e.cam.motion))},null,8,["modelValue"])])),_:1})])),_:1},512),[[Q]])])),_:1})]),(0,o.Wm)("div",p,[(0,o.Wm)(E,null,{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(Z,{tag:"label",class:"text-white justify-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(O,{icon:"mdi-record-rec",size:"80px",color:"orange",modelValue:e.cam.liveH24,"onUpdate:modelValue":t[6]||(t[6]=t=>e.cam.liveH24=t),onClick:t[7]||(t[7]=t=>e.changeSetting("live24",e.cam.liveH24))},null,8,["modelValue"])])),_:1})])),_:1},512),[[Q]])])),_:1})])]),(0,o.Wm)("div",v,[(0,o.Wm)("div",g,[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(e.cam.information,((e,t)=>((0,o.wg)(),(0,o.j4)(E,{key:t,dense:""},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(Z,{class:"text-white"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e[0])+": "+(0,a.zw)(e[1]),1)])),_:2},1536),[[l.F8,e[1]]])])),_:2},1024)))),128))])])])),_:1}),(0,o.Wm)(j,{name:"screenshot"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(e.screenshots,((e,t)=>((0,o.wg)(),(0,o.j4)("div",{class:"col-lg-12 col-md-12 col-sm-12 col-xs-12",key:t},[(0,o.Wm)("img",{class:"full-width",src:e},null,8,["src"])])))),128))])),_:1})])),_:1},8,["modelValue"])])),_:1})])])),_:1})}var f=s(1959),x=s(658),h=s(3226),W=s(2391),y=s(9582),b=s(6213),k=s.n(b),C=function(e,t,s,o){function a(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,l){function n(e){try{c(o.next(e))}catch(t){l(t)}}function i(e){try{c(o["throw"](e))}catch(t){l(t)}}function c(e){e.done?s(e.value):a(e.value).then(n,i)}c((o=o.apply(e,t||[])).next())}))};const{userState:z}=(0,h.C)(),{state:Z,screenshots:_,getCam:S,urlplayer:P,getScreenshot:M,panMove:j,setOptions:q}=(0,x.Z)(),O=()=>{const e=(0,f.qj)({isawait:!1,success:!0,msgError:"",msgSuccess:""}),t=(0,f.qj)({}),s=(0,f.qj)({val:{destroy:()=>{},volume:10}}),a=(0,f.iH)(""),l=(0,f.iH)("home"),n=e=>{var t;const o=document.getElementById("videostream");s.val=new(k().Player)(P(e),{canvas:o,protocols:null===(t=z.user)||void 0===t?void 0:t.token}),s.val.volume=10};(0,o.bv)((()=>{const e=(0,y.yj)();a.value=e.params.id,t.val=S(a.value),n(a.value)})),(0,o.Jd)((()=>{try{s&&s.val.destroy()}catch(e){console.log("error in camview beforeDestroy:",e)}}));const i=(t,s)=>C(void 0,void 0,void 0,(function*(){"screenshot"===t?(e.isawait=!0,yield M(a.value),e.isawait=!1):yield j(a.value,t,s)})),c=(t,s)=>C(void 0,void 0,void 0,(function*(){e.isawait=!0,yield q(a.value,t,s),e.success=Z.success,e.success?(0,W._)(`${t} set: ${s} ok!`):e.msgError=Z.msgError,e.isawait=!1}));return{state:(0,f.OT)(e),tab:l,JSMpegPlayer:(0,o.Fl)((()=>s.val)),screenshots:_,cam:(0,o.Fl)((()=>t.val)),getScreenshot:M,clickMove:i,changeSetting:c}},E=O;var N=s(3951);const T={class:"row justify-center"},Q={class:"col-xs-3"},V={class:"col-xs-6"},U={class:"col-xs-3"};function H(e,t,s,a,l,n){const i=(0,o.up)("q-btn"),c=(0,o.up)("q-select");return(0,o.wg)(),(0,o.j4)("div",T,[(0,o.Wm)("div",Q,[(0,o.Wm)(i,{icon:"mdi-content-save-all",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[1]||(t[1]=t=>e.emit("clickpreset","save_preset",e.preset))})]),(0,o.Wm)("div",V,[(0,o.Wm)(c,{filled:"","label-color":"white",color:"white",modelValue:e.preset,"onUpdate:modelValue":t[2]||(t[2]=t=>e.preset=t),options:e.listPreset,class:"float-center text-white",label:"Preset",id:"selectpreset"},null,8,["modelValue","options"])]),(0,o.Wm)("div",U,[(0,o.Wm)(i,{icon:"mdi-image-filter-center-focus-strong",color:"orange",flat:"",size:"xl",padding:"xs",class:"full-width text-capitalize",onMousedown:t[3]||(t[3]=t=>e.emit("clickpreset","preset",e.preset))})])])}const I=(0,o.aZ)({name:"ComponentPresets",emits:["clickpreset"],setup(e,{emit:t}){const s=(0,f.iH)("1"),a=(0,f.iH)([]);for(let o=1;o<20;o++)a.value.push(`${o}`);return(0,o.YP)(s,(()=>{t("clickpreset","preset",s.value)})),{emit:t,preset:s,listPreset:a}}});var J=s(4607),D=s(8516),R=s(7518),F=s.n(R);I.render=H;const L=I;F()(I,"components",{QBtn:J.Z,QSelect:D.Z});const $=(0,o.aZ)({name:"pCam",components:{joyPad:N.Z,presets:L},setup(){const{state:e,tab:t,JSMpegPlayer:s,cam:o,screenshots:a,getScreenshot:l,clickMove:n,changeSetting:i}=E();return{tab:t,state:e,JSMpegPlayer:s,cam:o,screenshots:a,getScreenshot:l,clickMove:n,changeSetting:i}}});var A=s(4379),G=s(6778),K=s(8430),Y=s(151),B=s(5589),X=s(4554),ee=s(3414),te=s(2035),se=s(2064),oe=s(8836),ae=s(7547),le=s(3269),ne=s(5869),ie=s(5906),ce=s(6602),re=s(7011),de=s(4620),me=s(6489);$.render=w;const ue=$;F()($,"components",{QPage:A.Z,QDialog:G.Z,QSpinnerPuff:K.Z,QCard:Y.Z,QCardSection:B.Z,QIcon:X.Z,QItem:ee.Z,QItemSection:te.Z,QSlider:se.Z,QKnob:oe.Z,QTabs:ae.Z,QTab:le.Z,QSeparator:ne.Z,QTabPanels:ie.Z,QTabPanel:ce.Z,QList:re.Z,QToggle:de.Z}),F()($,"directives",{Ripple:me.Z})}}]);